{"code":"!function(e){var t={};function o(l){if(t[l])return t[l].exports;var d=t[l]={i:l,l:!1,exports:{}};return e[l].call(d.exports,d,d.exports,o),d.l=!0,d.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var d in e)o.d(l,d,function(t){return e[t]}.bind(null,d));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){\"use strict\";function l(e,t,o){this.id=e,this.isActive=t,this.text=o}o.r(t);var d={allTodoItems:[],selectAll:!1};function n(){localStorage.clear();for(var e=0;e<d.allTodoItems.length;e++)localStorage[e]=JSON.stringify(d.allTodoItems[e])}function c(e,t){var o;o=d.allTodoItems.map((function(e){return e.id})).indexOf(e),d.allTodoItems[o].text=t,n()}function i(){for(var e=[],t=0;t<d.allTodoItems.length;t++)!1===d.allTodoItems[t].isActive&&e.push(d.allTodoItems[t]);return e}function s(){for(var e=[],t=0;t<d.allTodoItems.length;t++)!0===d.allTodoItems[t].isActive&&e.push(d.allTodoItems[t]);return e}function r(e){var t;t=d.allTodoItems.map((function(e){return e.id})).indexOf(e),d.allTodoItems.splice(t,1),n()}function u(){!0===d.selectAll&&(d.selectAll=!1)}var a,m,v,f,b,I={todoInput:\".js-new-todo\",todoList:\".js-todo-list\",selectAll:\".js-select-all\",counter:\".js-counter\",footer:\".js-footer\",clearCompleted:\".js-button_clear-сompleted\",todoItem:\"todo-item\",todoItemClose:\"js-todo-item__close\",todoItemLabel:\"js-todo-item__label\",todoItemCheck:\"js-todo-item__check\",todoItemDone:\"todo-item_done\",todoItemInput:\"todo-item__input\",todoItemLabelDone:\"todo-item__label_done\",buttonAll:\".js-button_all\",buttonActive:\".js-button_active\",buttonCompleted:\".js-button_completed\",buttonClearCompleted:\".js-button_clear-сompleted\",footerVisible:\"footer_visible\",buttonSelected:\"button_selected\",selectAllVisible:\"select-all_visible\",selectAllChecked:\"select-all_checked\",todoItemLabelEdited:\"todo-item__label_edited\",todoItemCheckEdited:\"todo-item__check_edited\",todoItemCloseEdited:\"todo-item__close_edited\",todoItemEdited:\"todo-item_edited\"};function L(){return I}function _(e){!0===e?document.querySelector(I.selectAll).classList.add(I.selectAllChecked):document.querySelector(I.selectAll).classList.remove(I.selectAllChecked)}function y(e,t){var o;(o=e.querySelector(\".\"+I.todoItemLabel)).classList.remove(I.todoItemLabelEdited),e.classList.remove(I.todoItemEdited),e.querySelector(\".\"+I.todoItemCheck).classList.remove(I.todoItemCheckEdited),e.querySelector(\".\"+I.todoItemClose).classList.remove(I.todoItemCloseEdited),t.remove(),o.innerHTML=t.value}function S(){var e;event.target.closest(\".todo-item\")&&(e=event.target.closest(\".todo-item\").id,document.getElementById(e).querySelector(\".\"+I.todoItemClose).classList.add(\"todo-item__close_visible\"))}function p(){!function(){for(var e=document.querySelectorAll(\".todo-item\"),t=0;t<e.length;t++)e[t].querySelector(\".\"+I.todoItemClose).classList.remove(\"todo-item__close_visible\")}()}function A(){var e,t,o,l,d,n;e=event.target.parentNode.id,event.target.classList.contains(m.todoItemLabel)&&(t=e.split(\"-\"),o=parseInt(t[1]),d=(l=function(e){var t,o,l;return(o=(t=document.getElementById(e)).querySelector(\".\"+I.todoItemLabel)).classList.add(I.todoItemLabelEdited),t.querySelector(\".\"+I.todoItemCheck).classList.add(I.todoItemCheckEdited),t.querySelector(\".\"+I.todoItemClose).classList.add(I.todoItemCloseEdited),t.classList.add(I.todoItemEdited),(l=document.createElement(\"input\")).type=\"text\",l.classList.add(I.todoItemInput),t.appendChild(l),l.value=o.innerHTML,l.focus(),[t,l]}(e))[0],n=l[1],v=h.bind(null,d,n,o),f=g.bind(null,d,n,o),window.addEventListener(\"click\",v),window.addEventListener(\"keydown\",f))}function h(e,t,o){var l;event.target.classList.contains(m.todoItemInput)||(l=t.value,y(e,t),c(o,l),window.removeEventListener(\"click\",v),window.removeEventListener(\"keydown\",f))}function g(e,t,o){var l;l=t.value,event.keyCode===b&&document.activeElement===t?(y(e,t),c(o,l),window.removeEventListener(\"click\",v),window.removeEventListener(\"keydown\",f)):27===event.keyEsc&&document.activeElement===t&&(!function(e,t){e.querySelector(\".\"+I.todoItemLabel).classList.remove(I.todoItemLabelEdited),e.classList.remove(I.todoItemEdited),e.querySelector(\".\"+I.todoItemCheck).classList.remove(I.todoItemCheckEdited),e.querySelector(\".\"+I.todoItemClose).classList.remove(I.todoItemCloseEdited),t.remove()}(e,t),window.removeEventListener(\"click\",v),window.removeEventListener(\"keydown\",f))}function q(){!function(e){document.querySelector(I.counter).innerHTML=String(e)+\" items left\"}(s().length)}function C(){var e;e=i();for(var t=0;t<e.length;t++)r(e[t].id);E()}function E(){var e;\"All\"===a?e=d.allTodoItems:\"Active\"===a?e=s():\"Completed\"===a&&(e=i()),_(function(){for(var e=0;e<d.allTodoItems.length;e++)if(!0===d.allTodoItems[e].isActive)return d.selectAll=!1,d.selectAll;return d.selectAll=!0,d.selectAll}()),function(e,t){for(var o,l,d,n=document.querySelector(I.todoList);n.firstChild;)n.removeChild(n.firstChild);for(var c=0;c<e.length;c++)o=e[c],l=void 0,d=void 0,l=I.todoList,d=!0===o.isActive?`<li class=\"todo-item\" id=\"todo-${o.id}\">    <div class=\"todo-item__check js-todo-item__check\"></div>    <label class=\"todo-item__label js-todo-item__label\">${o.text}</label>    <div class=\"todo-item__close js-todo-item__close\"></div></li>`:`<li class=\"todo-item todo-item_done\" id=\"todo-${o.id}\">    <div class=\"todo-item__check js-todo-item__check\"></div>    <label class=\"todo-item__label js-todo-item__label todo-item__label_done\">${o.text}</label>    <div class=\"todo-item__close js-todo-item__close\"></div></li>`,document.querySelector(l).insertAdjacentHTML(\"beforeend\",d)}(e),function(e){\"All\"===e?(document.querySelector(I.buttonAll).classList.add(I.buttonSelected),document.querySelector(I.buttonActive).classList.remove(I.buttonSelected),document.querySelector(I.buttonCompleted).classList.remove(I.buttonSelected)):\"Active\"===e?(document.querySelector(I.buttonAll).classList.remove(I.buttonSelected),document.querySelector(I.buttonActive).classList.add(I.buttonSelected),document.querySelector(I.buttonCompleted).classList.remove(I.buttonSelected)):\"Completed\"===e&&(document.querySelector(I.buttonAll).classList.remove(I.buttonSelected),document.querySelector(I.buttonActive).classList.remove(I.buttonSelected),document.querySelector(I.buttonCompleted).classList.add(I.buttonSelected))}(a),q()}function k(){a=\"Completed\",E(),w()}function T(){a=\"All\",E()}function j(){a=\"Active\",E()}function w(){!function(e){!0===e?(document.querySelector(I.selectAll).classList.remove(I.selectAllVisible),document.querySelector(I.footer).classList.remove(I.footerVisible)):(document.querySelector(I.selectAll).classList.add(I.selectAllVisible),document.querySelector(I.footer).classList.add(I.footerVisible))}(0===d.allTodoItems.length)}function x(){_(function(){if(!1===d.selectAll){for(var e=0;e<d.allTodoItems.length;e++)d.allTodoItems[e].isActive=!1;d.selectAll=!0}else{for(e=0;e<d.allTodoItems.length;e++)d.allTodoItems[e].isActive=!0;d.selectAll=!1}return n(),d.selectAll}()),E()}function O(e){var t,o;t=e.target.parentNode.id,e.target.classList.contains(m.todoItemClose)&&(o=t.split(\"-\"),r(parseInt(o[1])),function(e){var t=document.getElementById(e);t.parentNode.removeChild(t)}(t),w(),E())}function M(e){var t,o;t=e.target.parentNode.id,e.target.classList.contains(m.todoItemCheck)&&(o=t.split(\"-\"),function(e){var t,o;t=d.allTodoItems.map((function(e){return e.id})).indexOf(e),o=d.allTodoItems[t].isActive,d.allTodoItems[t].isActive=!0!==o,n()}(parseInt(o[1])),u(),function(e){var t,o;o=(t=document.getElementById(e)).querySelector(\".todo-item__label\"),t.classList.toggle(I.todoItemDone),o.classList.toggle(I.todoItemLabelDone)}(t),E())}a=\"All\",function(){for(var e,t,o=0;o<localStorage.length;o++)t=new l((e=JSON.parse(localStorage[o])).id,e.isActive,e.text),d.allTodoItems.push(t)}(),E(),w(),m=L(),b=13,document.addEventListener(\"keydown\",(function(e){var t,o,c;e.keyCode===b&&\"\"!==(c={text:document.querySelector(I.todoInput).value}).text&&(t=c.text,o=new l(d.allTodoItems.length>0?d.allTodoItems[d.allTodoItems.length-1].id+1:0,!0,t),d.allTodoItems.push(o),n(),document.querySelector(I.todoInput).value=\"\",u(),w(),E())})),document.querySelector(m.todoList).addEventListener(\"mouseover\",S),document.querySelector(m.todoList).addEventListener(\"mouseout\",p),document.querySelector(m.todoList).addEventListener(\"click\",O),document.querySelector(m.todoList).addEventListener(\"click\",M),document.querySelector(m.todoList).addEventListener(\"dblclick\",A),document.querySelector(m.selectAll).addEventListener(\"click\",x),document.querySelector(m.buttonAll).addEventListener(\"click\",T),document.querySelector(m.buttonActive).addEventListener(\"click\",j),document.querySelector(m.buttonCompleted).addEventListener(\"click\",k),document.querySelector(m.buttonClearCompleted).addEventListener(\"click\",C),T(),m=L()}]);","extractedComments":[]}