{"code":"!function(e){var t={};function o(l){if(t[l])return t[l].exports;var d=t[l]={i:l,l:!1,exports:{}};return e[l].call(d.exports,d,d.exports,o),d.l=!0,d.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var d in e)o.d(l,d,function(t){return e[t]}.bind(null,d));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,\"a\",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p=\"\",o(o.s=0)}([function(e,t,o){\"use strict\";function l(e,t,o){this.id=e,this.isActive=t,this.text=o}o.r(t);var d={allTodoItems:[],selectAll:!1};function n(){localStorage.clear();for(var e=0;e<d.allTodoItems.length;e++)localStorage[e]=JSON.stringify(d.allTodoItems[e])}function c(e,t){var o;o=d.allTodoItems.map((function(e){return e.id})).indexOf(e),d.allTodoItems[o].text=t,n()}function i(){for(var e=[],t=0;t<d.allTodoItems.length;t++)!1===d.allTodoItems[t].isActive&&e.push(d.allTodoItems[t]);return e}function s(e){var t;t=d.allTodoItems.map((function(e){return e.id})).indexOf(e),d.allTodoItems.splice(t,1),n()}function r(){!0===d.selectAll&&(d.selectAll=!1)}var u,a,m,v,f={todoInput:\".js-new-todo\",todoList:\".js-todo-list\",selectAll:\".js-select-all\",counter:\".js-counter\",footer:\".js-footer\",clearCompleted:\".js-button_clear-сompleted\",todoItem:\"todo-item\",todoItemClose:\"js-todo-item__close\",todoItemLabel:\"js-todo-item__label\",todoItemCheck:\"js-todo-item__check\",todoItemDone:\"todo-item_done\",todoItemInput:\"todo-item__input\",todoItemLabelDone:\"todo-item__label_done\",buttonAll:\".js-button_all\",buttonActive:\".js-button_active\",buttonCompleted:\".js-button_completed\",buttonClearCompleted:\".js-button_clear-сompleted\",footerVisible:\"footer_visible\",buttonSelected:\"button_selected\",selectAllVisible:\"select-all_visible\",selectAllChecked:\"select-all_checked\",todoItemLabelEdited:\"todo-item__label_edited\",todoItemCheckEdited:\"todo-item__check_edited\",todoItemCloseEdited:\"todo-item__close_edited\",todoItemEdited:\"todo-item_edited\"};function b(){return f}function I(e){!0===e?document.querySelector(f.selectAll).classList.add(f.selectAllChecked):document.querySelector(f.selectAll).classList.remove(f.selectAllChecked)}function L(e,t){var o;(o=e.querySelector(\".\"+f.todoItemLabel)).classList.remove(f.todoItemLabelEdited),e.classList.remove(f.todoItemEdited),e.querySelector(\".\"+f.todoItemCheck).classList.remove(f.todoItemCheckEdited),e.querySelector(\".\"+f.todoItemClose).classList.remove(f.todoItemCloseEdited),t.remove(),o.innerHTML=t.value}function _(){var e;event.target.closest(\".todo-item\")&&(e=event.target.closest(\".todo-item\").id,document.getElementById(e).querySelector(\".\"+f.todoItemClose).classList.add(\"todo-item__close_visible\"))}function y(){!function(){for(var e=document.querySelectorAll(\".todo-item\"),t=0;t<e.length;t++)e[t].querySelector(\".\"+f.todoItemClose).classList.remove(\"todo-item__close_visible\")}()}function S(){var e,t,o,l,d,n;e=event.target.parentNode.id,event.target.classList.contains(a.todoItemLabel)&&(t=e.split(\"-\"),o=parseInt(t[1]),d=(l=function(e){var t,o,l;return(o=(t=document.getElementById(e)).querySelector(\".\"+f.todoItemLabel)).classList.add(f.todoItemLabelEdited),t.querySelector(\".\"+f.todoItemCheck).classList.add(f.todoItemCheckEdited),t.querySelector(\".\"+f.todoItemClose).classList.add(f.todoItemCloseEdited),t.classList.add(f.todoItemEdited),(l=document.createElement(\"input\")).type=\"text\",l.classList.add(f.todoItemInput),t.appendChild(l),l.value=o.innerHTML,l.focus(),[t,l]}(e))[0],n=l[1],m=p.bind(null,d,n,o),v=A.bind(null,d,n,o),window.addEventListener(\"click\",m),window.addEventListener(\"keydown\",v))}function p(e,t,o){var l;event.target.classList.contains(a.todoItemInput)||(l=t.value,L(e,t),c(o,l),window.removeEventListener(\"click\",m),window.removeEventListener(\"keydown\",v))}function A(e,t,o){var l=t.value;13===event.keyCode&&document.activeElement===t?(L(e,t),c(o,l),window.removeEventListener(\"click\",m),window.removeEventListener(\"keydown\",v)):27===event.keyCode&&document.activeElement===t&&(!function(e,t){e.querySelector(\".\"+f.todoItemLabel).classList.remove(f.todoItemLabelEdited),e.classList.remove(f.todoItemEdited),e.querySelector(\".\"+f.todoItemCheck).classList.remove(f.todoItemCheckEdited),e.querySelector(\".\"+f.todoItemClose).classList.remove(f.todoItemCloseEdited),t.remove()}(e,t),window.removeEventListener(\"click\",m),window.removeEventListener(\"keydown\",v))}function h(){!function(e){document.querySelector(f.counter).innerHTML=String(e)+\" items left\"}(function(){return this.selectActiveTodos().length}())}function C(){var e;e=i();for(var t=0;t<e.length;t++)s(e[t].id);g()}function g(){var e;\"All\"===u?e=d.allTodoItems:\"Active\"===u?e=function(){for(var e=[],t=0;t<d.allTodoItems.length;t++)!0===d.allTodoItems[t].isActive&&e.push(d.allTodoItems[t]);return e}():\"Completed\"===u&&(e=i()),I(function(){for(var e=0;e<d.allTodoItems.length;e++)if(!0===d.allTodoItems[e].isActive)return d.selectAll=!1,d.selectAll;return d.selectAll=!0,d.selectAll}()),function(e,t){for(var o,l,d,n=document.querySelector(f.todoList);n.firstChild;)n.removeChild(n.firstChild);for(var c=0;c<e.length;c++)o=e[c],l=void 0,d=void 0,l=f.todoList,d=(d=(!0===o.isActive?'<li class=\"todo-item\" id=\"todo-%id%\">    <div class=\"todo-item__check js-todo-item__check\"></div>    <label class=\"todo-item__label js-todo-item__label\">%text%</label>    <div class=\"todo-item__close js-todo-item__close\"></div></li>':'<li class=\"todo-item todo-item_done\" id=\"todo-%id%\">    <div class=\"todo-item__check js-todo-item__check\"></div>    <label class=\"todo-item__label js-todo-item__label todo-item__label_done\">%text%</label>    <div class=\"todo-item__close js-todo-item__close\"></div></li>').replace(\"%id%\",o.id)).replace(\"%text%\",o.text),document.querySelector(l).insertAdjacentHTML(\"beforeend\",d)}(e),function(e){\"All\"===e?(document.querySelector(f.buttonAll).classList.add(f.buttonSelected),document.querySelector(f.buttonActive).classList.remove(f.buttonSelected),document.querySelector(f.buttonCompleted).classList.remove(f.buttonSelected)):\"Active\"===e?(document.querySelector(f.buttonAll).classList.remove(f.buttonSelected),document.querySelector(f.buttonActive).classList.add(f.buttonSelected),document.querySelector(f.buttonCompleted).classList.remove(f.buttonSelected)):\"Completed\"===e&&(document.querySelector(f.buttonAll).classList.remove(f.buttonSelected),document.querySelector(f.buttonActive).classList.remove(f.buttonSelected),document.querySelector(f.buttonCompleted).classList.add(f.buttonSelected))}(u),h()}function q(){u=\"Completed\",g()}function E(){u=\"All\",g()}function k(){u=\"Active\",g()}function T(){!function(e){!0===e?(document.querySelector(f.selectAll).classList.remove(f.selectAllVisible),document.querySelector(f.footer).classList.remove(f.footerVisible)):(document.querySelector(f.selectAll).classList.add(f.selectAllVisible),document.querySelector(f.footer).classList.add(f.footerVisible))}(0===d.allTodoItems.length)}function j(){I(function(){if(!1===d.selectAll){for(var e=0;e<d.allTodoItems.length;e++)d.allTodoItems[e].isActive=!1;d.selectAll=!0}else{for(e=0;e<d.allTodoItems.length;e++)d.allTodoItems[e].isActive=!0;d.selectAll=!1}return n(),d.selectAll}()),g()}function w(e){var t,o;t=e.target.parentNode.id,e.target.classList.contains(a.todoItemClose)&&(o=t.split(\"-\"),s(parseInt(o[1])),function(e){var t=document.getElementById(e);t.parentNode.removeChild(t)}(t),T(),g())}function x(e){var t,o;t=e.target.parentNode.id,e.target.classList.contains(a.todoItemCheck)&&(o=t.split(\"-\"),function(e){var t;t=d.allTodoItems.map((function(e){return e.id})).indexOf(e),!0===d.allTodoItems[t].isActive?d.allTodoItems[t].isActive=!1:d.allTodoItems[t].isActive=!0,n()}(parseInt(o[1])),r(),function(e){var t,o;o=(t=document.getElementById(e)).querySelector(\".todo-item__label\"),t.classList.toggle(f.todoItemDone),o.classList.toggle(f.todoItemLabelDone)}(t),g())}u=\"All\",function(){for(var e,t,o=0;o<localStorage.length;o++)t=new l((e=JSON.parse(localStorage[o])).id,e.isActive,e.text),d.allTodoItems.push(t)}(),g(),T(),a=b(),document.addEventListener(\"keydown\",(function(e){var t,o,c;13===e.keyCode&&\"\"!==(c={text:document.querySelector(f.todoInput).value}).text&&(t=c.text,o=new l(d.allTodoItems.length>0?d.allTodoItems[d.allTodoItems.length-1].id+1:0,!0,t),d.allTodoItems.push(o),n(),document.querySelector(f.todoInput).value=\"\",r(),T(),g())})),document.querySelector(a.todoList).addEventListener(\"mouseover\",_),document.querySelector(a.todoList).addEventListener(\"mouseout\",y),document.querySelector(a.todoList).addEventListener(\"click\",w),document.querySelector(a.todoList).addEventListener(\"click\",x),document.querySelector(a.todoList).addEventListener(\"dblclick\",S),document.querySelector(a.selectAll).addEventListener(\"click\",j),document.querySelector(a.buttonAll).addEventListener(\"click\",E),document.querySelector(a.buttonActive).addEventListener(\"click\",k),document.querySelector(a.buttonCompleted).addEventListener(\"click\",q),document.querySelector(a.buttonClearCompleted).addEventListener(\"click\",C),E(),a=b()}]);","extractedComments":[]}